/*! For license information please see bundle.js.LICENSE.txt */
!function(){"use strict";var t={829:function(t,e,i){t.exports=i.p+"c64ceaded8c10eb8420c.png"},484:function(t,e,i){t.exports=i.p+"85499af6442d8cb5b070.png"},325:function(t,e,i){t.exports=i.p+"de42fcc09d1e409fd907.mp3"},698:function(t,e,i){t.exports=i.p+"fbcf912ed9ad36c2aefd.mp3"},234:function(t,e,i){t.exports=i.p+"04005a783ec0d65dc50a.mp3"},353:function(t,e,i){t.exports=i.p+"5a3a6e95ff12b8431a86.mp3"}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,i),a.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t}(),function(){var t=i(484);function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function i(e,n,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.dimensions=n,this.collisionMap=s,this.ctx=e,this.x=0,this.y=130,this.width=16,this.height=32,this.frameX=3,this.frameY=0,this.image=new Image,this.image.src=t,this.keypress={},this.SPEED=9,this.moving=!1,this._registerEvents()}var s,a;return s=i,(a=[{key:"_registerEvents",value:function(){var t=this;window.addEventListener("keydown",(function(e){t.keypress[e.code]=!0,t.moving=!0})),window.addEventListener("keyup",(function(e){delete t.keypress[e.code],t.moving=!1,t.frameX=1}))}},{key:"_drawSprite",value:function(t,e,i,n,s,a,r,o,h){this.ctx.drawImage(t,e,i,n,s,a,r,o,h)}},{key:"_getCollisionPosition",value:function(){return[Math.floor(this.x/15),Math.floor(this.y/14.25)]}},{key:"animate",value:function(){this._drawSprite(this.image,this.width*this.frameX,this.height*this.frameY,this.width,this.height,this.x,this.y,this.width,this.height),this.movePlayer(),this.playerFrame()}},{key:"movePlayer",value:function(){var t,i,n=(t=this._getCollisionPosition(),i=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,s,a=[],r=!0,o=!1;try{for(i=i.call(t);!(r=(n=i.next()).done)&&(a.push(n.value),!e||a.length!==e);r=!0);}catch(t){o=!0,s=t}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return a}}(t,i)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,i):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=n[0],a=n[1];this.keypress.KeyW&&this.y>this.SPEED&&0===this.collisionMap[a-1][s]&&((this.frameX<6||this.frameX>10)&&(this.frameX=6,this.frameY=2),this.y-=this.SPEED,this.moving=!0),this.keypress.KeyA&&this.x>0&&0===this.collisionMap[a][s-1]&&((this.frameX<12||this.frameX>17)&&(this.frameX=12,this.frameY=2),this.x-=this.SPEED,this.moving=!0),this.keypress.KeyD&&this.x<this.dimensions.width-1.75*this.width&&0===this.collisionMap[a][s+1]&&(this.frameX>5&&(this.frameX=0,this.frameY=2),this.x+=this.SPEED,this.moving=!0),this.keypress.KeyS&&this.y<this.dimensions.height-Math.floor(1.5*this.height)&&0===this.collisionMap[a+1][s]&&((this.frameX<18||this.frameX>=23)&&(this.frameX=18,this.frameY=2),this.y+=this.SPEED,this.moving=!0)}},{key:"playerFrame",value:function(){this.moving||(this.frameY=1,5===this.frameX?this.frameX=0:11===this.frameX?this.frameX=6:17===this.frameX?this.frameX=12:this.frameX>=23&&(this.frameX=18)),this.frameX>22&&(this.frameX=0),this.frameX++}}])&&n(s.prototype,a),i}(),a=i(829);function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.getElementById("backgroundLayer"),this.ctx=this.canvas.getContext("2d"),this.collideMap=this.constructor.getCollisionMap(),this.image=new Image,this.image.src=a,this.draw()}var e,i,n;return e=t,n=[{key:"getCollisionMap",value:function(){return[[1,1,1,1,1,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0]]}}],(i=[{key:"draw",value:function(){var t=this;this.image.onload=function(){t.canvas.width=t.image.naturalWidth,t.canvas.height=t.image.naturalHeight,t.ctx.drawImage(t.image,0,0)}}},{key:"getDimensions",value:function(){return{width:this.image.naturalWidth,height:this.image.naturalHeight}}}])&&r(e.prototype,i),n&&r(e,n),t}();function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sound=new Audio(e),this.sound.volume=.1}var e,i;return e=t,(i=[{key:"play",value:function(){this.sound.play()}},{key:"pause",value:function(){this.sound.pause()}},{key:"incVolume",value:function(){this.sound.volume+=.5}},{key:"decVolume",value:function(){this.sound.volume-=.5}},{key:"getSound",value:function(){return this.sound}},{key:"setVolume",value:function(t){this.sound.volume=t}}])&&h(e.prototype,i),t}(),c=i(698),l=i(325),f=i(353),m=i(234);function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=new o,this.fpsInterval="",this.then="",this.startTime="",this.now="",this.then="",this.elapsed="",this.isPaused=!0,this.canvas=document.getElementById("player"),this.ctx=this.canvas.getContext("2d"),console.log(this.dimensions)}var e,i;return e=t,(i=[{key:"startAnimate",value:function(t){this.fpsInterval=1e3/t,this.then=Date.now(),this.startTime=this.then,this.animate()}},{key:"animate",value:function(){var t=this;this.isPaused||(requestAnimationFrame((function(){return t.animate()})),this.now=Date.now(),this.elapsed=this.now-this.then,this.elapsed>this.fpsInterval&&(this.then=this.now-this.elapsed%this.fpsInterval,this.ctx.clearRect(0,0,this.dimensions.width,this.dimensions.height),this.character.animate()))}},{key:"togglePause",value:function(){this.isPaused=!this.isPaused}},{key:"play",value:function(){var t,e,i,n;t=this.canvas,e=window.innerWidth/t.width,i=window.innerHeight/t.height,n=Math.min(e,i)-1.5,stage.style.transformOrigin="center",stage.style.transform="scale("+n+")",console.log(this.map.getDimensions()),this._setDimensions(),this._setPlayer(),this.map.draw(),this.startAnimate(15)}},{key:"_setDimensions",value:function(){this.dimensions=this.map.getDimensions(),this.canvas.width=this.dimensions.width,this.canvas.height=this.dimensions.height}},{key:"_setPlayer",value:function(){this.character=new s(this.ctx,this.map.getDimensions(),o.getCollisionMap())}}])&&d(e.prototype,i),t}(),v=[];!function(){for(var t=0;t<arguments.length;t++)v[t]=new Image,v[t].src=t<0||arguments.length<=t?void 0:arguments[t]}(t,a),document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("backgroundLayer"),e=new p;window.addEventListener("keydown",(function(i){"Enter"===i.code&&(document.getElementById("dialogue").classList.add("hide"),t.classList.remove("hide"),e.togglePause(),e.play(),function(){var t=new u(c),e=new u(f);e.setVolume(.25);var i=new u(l);i.setVolume(.35);var n=[t,i,e,new u(m)],s=n.shift();s.play(),s.getSound().addEventListener("ended",(function(){var t=n.shift();n.push(t),t.play()}))}())}))}))}()}();
//# sourceMappingURL=bundle.js.map